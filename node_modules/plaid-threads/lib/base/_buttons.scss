//
// Variables
//

// Shared button variables
$buttons-button-height: $variables-spatial-rhythm * 6;
$buttons-button-height-small: $variables-spatial-rhythm * 4;
$buttons-primary-easing-duration: $variables-primary-easing-duration;
$buttons-focused-state-box-shadow: rgba($variables-secondary-blue-medium, 0.8);

// Colors for primary buttons (for both light and dark backgrounds)
$buttons-primary-button-shadow-color: rgba($variables-primary-blue-dark, 0.3);
$buttons-primary-button-shadow-color-dark: rgba($variables-primary-blue-dark, 0.6);
$buttons-primary-button-inset-shadow-color-dark: #0d3f68;
$buttons-primary-button-inset-shadow-color-light: #2f6089;

// Colors for default buttons (for both light and dark backgrounds)
$buttons-default-button-shadow-color: rgba($variables-primary-blue-light, 0.3);
$buttons-default-bright-button-active-background: #174b76;
$buttons-default-bright-button-active-inset-shadow: rgba($variables-gray-dark, 0.2);

// Colors for dangerous buttons
$buttons-dangerous-button-inset-shadow-color: #910730;
$buttons-dangerous-button-text-shadow: #6c0523;


//
// Buttons
//

button,
.button {
  border-bottom-width: 0;
  border-radius: $variables-border-radius;
  border-width: 0;
  display: inline-block;
  font-size: 1.6rem;
  height: rem($buttons-button-height);
  line-height: rem($buttons-button-height);
  padding-bottom: 0;
  padding-left: rem($variables-spatial-rhythm * 3);
  padding-right: rem($variables-spatial-rhythm * 3);
  padding-top: 0;
  position: relative;

  // Shared state for disabled buttons
  &[disabled],
  &--is-disabled {
    cursor: not-allowed;
    opacity: 0.5;

    &:hover {
      cursor: not-allowed;
    }
  }

  // Shared state active buttons that ensures hover state is **not** visible
  &:active {
    &:hover {
      &:after {
        opacity: 0;
      }
    }
  }

  // Hover state
  &:hover {
    cursor: pointer;
  }

  // Focused state
  &:focus {
    box-shadow: 0 0 5px 2px $buttons-focused-state-box-shadow;
    outline: 0;
  }

  // Sometimes buttons include icons in additon to text
  &__icon {
    font-size: rem(12); // ensures button icon's height == vaud's cap height
    left: -6px;
    position: relative;
  }

  // Small button modifier
  &--is-small {
    font-size: rem(14);
    height: rem($buttons-button-height-small);
    line-height: rem($buttons-button-height-small);
    padding-left: rem($variables-spatial-rhythm * 2);
    padding-right: rem($variables-spatial-rhythm * 2);

    .button__icon {
      font-size: rem(10.5); // ensures button icon's height == vaud's cap height
      position: relative;
    }
  }

  // Primary button modifier
  &--is-primary {
    background-color: $variables-primary-blue-medium;
    box-shadow: 0 1px 2px $buttons-primary-button-shadow-color, inset 0 -1px 0 $buttons-primary-button-inset-shadow-color-dark, inset 0 1px 0 $buttons-primary-button-inset-shadow-color-light;
    color: $variables-white;
    font-weight: 500;
    text-shadow: 0 1px 1px $variables-primary-text-shadow-color;

    &:after {
      border-radius: $variables-border-radius;
      box-shadow: 0 4px 8px $buttons-primary-button-shadow-color;
      content: '';
      height: 100%;
      left: 0;
      opacity: 0;
      position: absolute;
      top: 0;
      transition-duration: $buttons-primary-easing-duration;
      transition-property: opacity;
      transition-timing-function: $variables-secondary-easing;
      width: 100%;
    }

    &:hover {
      &:after {
        opacity: 1;
      }
    }

    &:active {
      box-shadow: inset 0 2px 3px $variables-primary-blue-dark;
    }
  }

  // Default button modifier
  &--is-default {
    background-color: $variables-off-white;
    border-color: $variables-gray-light;
    border-radius: $variables-border-radius;
    border-style: solid;
    border-width: 1px;
    box-shadow: 0 1px 2px $buttons-default-button-shadow-color, inset 0 1px 0 $variables-white;
    color: $variables-primary-blue-medium;

    &:after {
      border-radius: $variables-border-radius;
      box-shadow: 0 4px 8px $buttons-default-button-shadow-color;
      content: '';
      height: 100%;
      left: 0;
      opacity: 0;
      position: absolute;
      top: 0;
      transition-duration: $buttons-primary-easing-duration;
      transition-property: opacity;
      transition-timing-function: $variables-secondary-easing;
      width: 100%;
    }

    &:hover {
      &:after {
        opacity: 1;
      }
    }

    &:active {
      border-color: transparent;
      box-shadow: inset 0 -1px 1px $variables-gray-light, inset 0 2px 2px $buttons-default-button-shadow-color;
    }
  }

  // Dangerous button modifier
  &--is-dangerous {
    background-color: $variables-red-dark;
    box-shadow: 0 2px 4px $variables-red-medium, inset 0 -1px 0 0 $buttons-dangerous-button-inset-shadow-color, inset 0 1px 0 0 $variables-red-medium;
    color: $variables-white;
    font-weight: 500;
    text-shadow: 0 1px 1px $buttons-dangerous-button-text-shadow;

    &:after {
      border-radius: $variables-border-radius;
      box-shadow: 0 4px 8px $variables-red-medium;
      content: '';
      height: 100%;
      left: 0;
      opacity: 0;
      position: absolute;
      top: 0;
      transition-duration: $buttons-primary-easing-duration;
      transition-property: opacity;
      transition-timing-function: $variables-secondary-easing;
      width: 100%;
    }

    &:hover {
      &:after {
        opacity: 1;
      }
    }

    &:active {
      box-shadow: inset 0 2px 3px $buttons-dangerous-button-inset-shadow-color;
      transition-duration: 0;
    }
  }

  // Bright button modifier (for use on dark backgrounds)
  &--is-bright {
    color: $variables-white;
    text-shadow: 0 1px 1px $variables-primary-text-shadow-color;

    // Primary bright button
    &.button--is-primary {
      background: $variables-off-white;
      background: linear-gradient($variables-off-white, $variables-gray-medium);
      box-shadow: 0 2px 4px $buttons-primary-button-shadow-color-dark, inset 0 1px 0 $variables-white;
      color: $variables-primary-blue-dark;
      font-weight: 400;
      text-shadow: none;

      &:after {
        box-shadow: 0 4px 20px $buttons-primary-button-shadow-color-dark;
      }

      &:active {
        box-shadow: inset 0 1px 2px $variables-gray-dark;
      }
    }

    // Default bright button
    &.button--is-default {
      background-color: $variables-primary-blue-medium;
      border-width: 0;
      box-shadow: 0 2px 4px $buttons-primary-button-shadow-color, inset 0 -1px 0 $buttons-primary-button-inset-shadow-color-dark, inset 0 1px 0 $buttons-primary-button-inset-shadow-color-light;
      font-weight: 500;

      &:after {
        box-shadow: 0 4px 20px $buttons-primary-button-shadow-color-dark;
      }

      &:active {
        background-color: $buttons-default-bright-button-active-background;
        box-shadow: inset 0 -1px 0 $buttons-default-bright-button-active-inset-shadow, inset 0 2px 3px $variables-primary-blue-dark;
      }
    }
  }

  // Full width button modifier
  &--is-full-width {
    display: block;
    padding-left: 0;
    padding-right: 0;
    text-align: center;
    width: 100%;
  }

  // Sometimes buttons are displayed in groups. --has-margin-right helps ensure
  // spacing between grouped buttons remain consistent
  &--has-margin-right {
    margin-right: rem($variables-spacing-small);
  }
}
